// ignore_for_file: camel_case_types, file_names, non_constant_identifier_names

import 'package:flutter/material.dart';

import 'package:shella_design/common/util/app_colors.dart';
import 'package:shella_design/common/util/app_dimensions.dart';
import 'package:shella_design/common/util/app_images.dart';
import 'package:shella_design/common/util/app_styles.dart';
import 'package:shella_design/common/util/navigation/navigation.dart';
import 'package:shella_design/common/widgets/appBar/mobile/appBar_mobile.dart';
import 'package:shella_design/common/widgets/texts/custom_text.dart';

class Befor_Pdf_Screen extends StatelessWidget {
  final String time;
  final String day;
  final String name;
  final String identityNumber;
  final String nationality;
  final String neighborhood;
  final String house_type;

  const Befor_Pdf_Screen({
    super.key,
    required this.time,
    required this.day,
    required this.name,
    required this.identityNumber,
    required this.nationality,
    required this.neighborhood,
    required this.house_type,
  });

  factory Befor_Pdf_Screen.fromArguments(context) {
    final args = ModalRoute.of(context)?.settings.arguments as Map<String, dynamic>? ?? {};

    return Befor_Pdf_Screen(
      time: args['time'] ?? '',
      day: args['day'] ?? '',
      name: args['name'] ?? '',
      identityNumber: args['identityNumber'] ?? '',
      nationality: args['nationality'] ?? '',
      neighborhood: args['neighborhood'] ?? '',
      house_type: args['house_type'] ?? '',
    );
  }

  @override
  Widget build(BuildContext context) {
    final List<String> list_Pdf = generateContractIntro(
      time: time,
      day: day,
      name: name,
      identityNumber: identityNumber,
      nationality: nationality,
      neighborhood: neighborhood,
      house_type: house_type,
    );

    bool isTitle(String text) {
      return text.trim().startsWith("المادة") || text.trim() == "المقدمة:" || text.trim() == "إقرار وتوقيع";
    }

    return Scaffold(
      backgroundColor: AppColors.wtColor,
      appBar: custom_AppBar(
        context,
        title: "العقد",
        icon: Icons.arrow_back_sharp,
        img_icon: AppImages.KiadaWalletSubscription,
        onPressed: () => nav.back(),
      ),
      body: SingleChildScrollView(
        child: Padding(
          padding: const EdgeInsets.all(15),
          child: Column(
            children: [
              Image.asset(AppImages.logo, height: 90, width: 300),
              const SizedBox(height: 20),
              Custom_Text(
                context,
                text: "عقد خدمة قيدها - اشتر الآن وادفع مع الراتب",
                textAlign: TextAlign.center,
                style: font14Black500W(context, size: size_14(context)),
              ),
              // Column(
              //   crossAxisAlignment: CrossAxisAlignment.start,
              //   children: list_Pdf.map((item) {
              //     return Custom_Text(
              //       context,
              //       text: item,
              //       textAlign: TextAlign.center,
              //       style: font10Grey600W(context, size: size_12(context)),
              //     );
              //   }).toList(),
              // ),

              SizedBox(
                  height: 600,
                  width: 500,
                  child: SingleChildScrollView(
                    child: Directionality(
                      textDirection: TextDirection.rtl,
                      child: Column(
                        crossAxisAlignment: CrossAxisAlignment.start,
                        children: list_Pdf.map((text) {
                          if (text.trim().isEmpty) return SizedBox(height: 16);
                          return Padding(
                            padding: const EdgeInsets.only(bottom: 8),
                            child: Text(
                              text,
                              textAlign: TextAlign.right,
                              style: TextStyle(
                                fontSize: 16,
                                fontWeight: isTitle(text) ? FontWeight.bold : FontWeight.normal,
                                height: 1.6,
                              ),
                            ),
                          );
                        }).toList(),
                      ),
                    ),
                  )),

              //
            ],
          ),
        ),
      ),
    );
  }
}

List<String> generateContractIntro({
  required String time,
  required String day,
  required String name,
  required String identityNumber,
  required String nationality,
  required String neighborhood,
  required String house_type,

  //
}) {
  return [
    "",
    "",
    "تحرير العقد الساعة $time يوم $day",
    "",

    "بين كل من:",
    "الطرف الأول: شركة \"شلة\" (المشار إليها فيما بعد بـ \"الشركة\")، وهي مؤسسة تجارية مسجلة وفقًا لقوانين المملكة العربية السعودية وعنوانها الرياض، مجمع السن فالي، وتعمل كمقدمة لخدمة \"قيدها - اشتر الآن وادفع مع الراتب\".",
    "",

    "الطرف الثاني: العميل",

    "الاسم: $name",
    "رقم الهوية/الإقامة: $identityNumber",
    "الجنسية: $nationality",
    "العنوان: $neighborhood",
    "نوع المنزل: $house_type",

    "",
    "المشار إليه فيما بعد بـ \"العميل\"، وهو الشخص الطبيعي المستفيد من خدمة قيدها - اشتر الآن وادفع مع الراتب.",
    "",
    "",

    "المقدمة:",
    "",
    "بموجب هذا العقد، تقدم الشركة للعميل خدمة \"قيدها - اشتر الآن وادفع مع الراتب\" ...",

    "",

    "المادة الأولى: تعريف الخدمة",
    "خدمة قيدها - اشتر الآن وادفع مع الراتب هي خدمة بيع بالآجل قصيرة الأجل تقدم عبر تطبيق \"شلة\" تتيح للعميل المؤهل شراء المنتجات والخدمات من المتاجر المؤهلة المدرجة في التطبيق، ودفع قيمتها لاحقًا في الموعد المحدد وفقًا لبنود هذا العقد، وذلك دون فرض أي فوائد أو رسوم إدارية أو رسوم تأخير أو أي رسوم إضافية أخرى على العميل مقابل استخدام الخدمة نفسها.",

    "",

    "يشترط لتفعيل واستخدام الخدمة أن يستوفي العميل الشروط التالية:",
    "1. أن لا يقل عمر العميل عن 18 عامًا ميلاديًا.",
    "2. أن يكون العميل موظفًا ولديه مصدر دخل شهري منتظم ومثبت.",
    "3. أن يكون السجل الائتماني للعميل لدى الشركة السعودية للمعلومات الائتمانية (سمة) أو أي جهة معتمدة أخرى نظيفًا وخاليًا من التعثرات، وذلك وفقًا لتقييم الشركة.",
    "4. أن لا يقل صافي الراتب الشهري للعميل عن 4000 ريال سعودي (أربعة آلاف ريال).",
    "5. أن يستوفي أي متطلبات أخرى قد تحددها الشركة وتعلن عنها عبر التطبيق.",

    "",

    "المادة الثالثة: تفعيل الخدمة",
    "1. يلتزم العميل بتقديم طلب تفعيل الخدمة عبر تطبيق \"شلة\"، وتعبئة كافة البيانات المطلوبة بشكل صحيح ودقيق، والموافقة على شروط وأحكام هذا العقد وسياسة الخصوصية.",
    "2. يحق للشركة عند الحاجة طلب تقديم مستندات إضافية لإثبات هوية العميل مثل نسخة من الهوية الوطنية أو الإقامة سارية المفعول، وإثبات الدخل مثل شهادة راتب حديثة أو كشف حساب بنكي لآخر ثلاثة أشهر.",
    "3. تلتزم الشركة بمراجعة طلب التفعيل خلال مدة لا تتجاوز ثمان (8) ساعات عمل من تاريخ استلام الطلب كاملاً ومستوفياً للمستندات المطلوبة خلال أوقات العمل الرسمية للشركة. في حال حدوث تأخير، سيتم إشعار العميل بذلك عبر التطبيق أو الوسائل المعتمدة الأخرى.",
    "4. في حال عدم استيفاء العميل الشروط الأهلية أو عدم اكتمال المستندات، يحق للشركة رفض طلب تفعيل الخدمة ويتم إبلاغ العميل بقرار الرفض عبر رسالة نصية SMS أو عبر تطبيق واتساب على الرقم المسجل. تحتفظ الشركة بالحق في عدم الإفصاح عن سبب الرفض المفصل.",
    "5. يحق للعميل تقديم اعتراض على قرار الرفض خلال سبعة (7) أيام عمل من تاريخ إبلاغه بالرفض، وستقوم الشركة بمراجعة الاعتراض وإبلاغ العميل بالقرار النهائي بنفس طريقة الإبلاغ المذكورة في الفقرة (4) من هذه المادة.",

    "",

    "المادة الرابعة: الحد الائتماني",
    "1. يتم تحديد حد ائتماني للعميل بناءً على تقييم الشركة لوضعه المالي والائتماني، وبما لا يتجاوز مبدئيًا نسبة 30% من صافي الدخل الشهري المثبت للعميل وقت التقييم، وبحد أدنى قدره 500 ريال سعودي وحد أقصى قدره 2500 ريال سعودي، ما لم يتم الاتفاق على خلاف ذلك أو تعديله لاحقًا من قبل الشركة.",
    "2. الحد الأقصى لقيمة الفاتورة الواحدة التي يمكن للعميل شراؤها باستخدام الخدمة يجب ألا يتجاوز 25% من إجمالي الحد الائتماني المخصص للعميل. يجب أن يكون إجمالي قيمة المشتريات غير المسددة للعميل في أي وقت ضمن حدود الحد الائتماني المخصص له.",
    "3. يحق للعميل بعد مرور ستة (6) أشهر من الاستخدام المنتظم للخدمة، أو عند حدوث تغيير جوهري في دخله، طلب مراجعة أو زيادة حدّه الائتماني، ويتطلب ذلك تقديم مستندات حديثة تثبت زيادة الدخل، وتخضع الموافقة على الطلب لتقدير الشركة وتقييمها.",
    "4. يحق للشركة تعديل الحد الائتماني للعميل بالزيادة أو النقصان في أي وقت بناءً على تقييمها المستمر للسلوك الائتماني والشرائي للعميل، أو بناءً على أي معلومات ائتمانية جديدة. سيتم إشعار العميل بأي تخفيض في الحد الائتماني قبل 48 ساعة على الأقل من سريان التعديل، وذلك عبر إشعار داخل التطبيق أو أي وسيلة أخرى تراها الشركة مناسبة.",

    "",

    "المادة الخامسة: المتاجر المؤهلة",
    "1. يمكن للعميل استخدام الخدمة للشراء من المتاجر المؤهلة التي تظهر قائمتها في تطبيق \"شلة\".",
    "2. تحدد الشركة قائمة المتاجر المؤهلة وتقوم بتحديثها بشكل دوري وفقا لمعاييرها الداخلية.",
    "3. يمكن للعميل اقتراح إضافة متاجر جديدة غير مدرجة حاليا في التطبيق عبر الوسائل المتاحة في التطبيق، وستقوم الشركة بدراسة هذه الاقتراحات.",

    "", // سطر فارغ
    // المادة السادسة عملية الشراء والدفع
    "المادة السادسة: عملية الشراء والدفع",
    "1. يتم إجراء عمليات الشراء باستخدام الخدمة عبر تطبيق \"شلة\" لدى المتاجر المؤهلة.",
    "2. يتم تسجيل جميع عمليات الشراء وتفاصيلها (المنتج، الخدمة، القيمة، التاريخ، الوقت، المتجر) في حساب العميل بالتطبيق.",
    "3. يعتبر إدخال العميل لرمز التحقق لمرة واحدة (OTP) الخاص بعملية التسليم، أو تأكيد الاستلام عبر الإشعارات الواردة في تطبيق \"شلة\"، بمثابة إثبات قاطع ونهائي لاستلام العميل للمنتجات أو الخدمات المشتراة، ولا يعتد بأي إنكار للاستلام بعد ذلك.",
    "4. تاريخ استحقاق الدفع الافتراضي لقيمة كل عملية شراء هو تاريخ استلام الراتب الشهري التالي لتاريخ عملية الشراء، كما هو محدد من قبل العميل عند التسجيل أو المحدث لاحقًا.",
    "5. تمنح الشركة العميل فترة سداد مرنة تصل بحد أقصى إلى أربعين (40) يومًا من تاريخ الشراء لتغطية الحالات الطارئة أو تأخر استلام الراتب للأسباب الخارجة عن إرادة العميل. يتوجب على العميل السداد فور استلام راتبه أو خلال هذه الفترة كحد أقصى.",
    "6. تؤكد الشركة مجددًا على عدم فرض أي رسوم تأخير أو فوائد أو أي رسوم أخرى على المبالغ المستحقة.",
    "7. في حال تجاوز العميل فترة السداد القصوى المحددة بأربعين (40) يومًا دون سداد المبلغ المستحق، يحق للشركة اتخاذ الإجراءات الموضحة في المادة التاسعة من هذا العقد.",

    "", // سطر فارغ
    // المادة السابعة إرجاع المنتجات
    "المادة السابعة: إرجاع المنتجات",
    "1. يحق للعميل إرجاع المنتجات المشتراة عبر الخدمة وفقا لسياسة الإرجاع الخاصة بالمتجر الذي تمت منه عملية الشراء، وبشرط أن تكون المنتجات في حالتها الأصلية وغير مستخدمة ومع عبواتها الأصلية وخلال المدة المحددة في سياسة المتجر.",
    "2. في حال رغبة العميل بإرجاع منتجات غير معيبة، يتحمل العميل نسبة 50% من تكلفة شحن الإرجاع الفعلية.",
    "3. في حال كان سبب الإرجاع وجود عيب مصنعي في المنتج، أو تلف أثناء التوصيل، أو استلام منتج خاطئ مخالف لما تم طلبه، فإن المتجر أو الشركة حسب الاتفاق مع المتجر يتحمل كامل تكاليف شحن الإرجاع، ولا يتحمل العميل أي أعباء مالية مقابل ذلك وذلك بعد التحقق من الحالة.",
    "4. يتم تحديث رصيد العميل المستحق بعد تأكيد عملية الإرجاع واستلام المنتج من قبل المتجر.",

    "", // سطر فارغ

    // المادة الثامنة إلغاء الخدمة من قبل العميل
    "المادة الثامنة: إلغاء الخدمة من قبل العميل",
    "1. يحق للعميل طلب إلغاء تفعيل خدمة \"قيدها\" في أي وقت عبر لوحة التحكم في التطبيق.",
    "2. عند طلب الإلغاء، يلتزم العميل بسداد كامل الرصيد المتبقي عليه. يتم سداد 50% من الرصيد فور طلب الإلغاء، ويسدد الـ 50% المتبقية في الموعد الأقرب من بين: (أ) مرور ثلاثين (30) يومًا من تاريخ الإلغاء، أو (ب) تاريخ استحقاق الراتب التالي للعميل كما هو مسجل لدى الشركة.",
    "3. لا يتم إلغاء الخدمة فعليًا إلا بعد سداد كامل الرصيد المستحق.",

    "", // سطر فارغ

    // المادة التاسعة إيقاف الخدمة من قبل الشركة
    "المادة التاسعة: إيقاف الخدمة من قبل الشركة",
    "يحق للشركة إيقاف خدمة \"قيدها\" مؤقتًا عن العميل في الحالات التالية:",
    "1. التأخر في سداد المبالغ المستحقة بعد انتهاء فترة السداد القصوى المحددة بأربعين (40) يومًا من تاريخ الشراء.",
    "2. الاشتباه في وجود عمليات احتيالية أو استخدام غير مصرح به لحساب العميل.",
    "3. رصد أنماط شرائية غير اعتيادية أو عالية المخاطر وفقًا لتقدير الشركة وأنظمتها لإدارة المخاطر.",
    "4. مخالفة العميل لأي من بنود هذا العقد. سيتم إبلاغ العميل بقرار الإيقاف وسببه عبر التطبيق أو الوسائل المعتمدة. يجوز للشركة إعادة تفعيل الخدمة بعد زوال سبب الإيقاف وتسوية أي التزامات قائمة، وذلك وفقا لتقديرها المطلق. في حالة عدم السداد بعد الإيقاف، يحق للشركة إحالة المديونية إلى فريق التحصيل المختص واتخاذ الإجراءات النظامية المتاحة لتحصيل مستحقاتها.",

    "", // سطر فارغ

    // المادة العاشرة مسؤوليات العميل
    "المادة العاشرة: مسؤوليات العميل",
    "1. يلتزم العميل بتقديم معلومات صحيحة ودقيقة وكاملة عند التسجيل وتفعيل الخدمة وتحديثها عند أي تغيير.",
    "2. يلتزم العميل بالمحافظة على سرية معلومات الدخول لحسابه في التطبيق وعدم مشاركتها مع الغير، ويتحمل المسؤولية الكاملة عن جميع العمليات التي تتم عبر حسابه.",
    "3. يلتزم العميل بسداد قيمة المشتريات في المواعيد المحددة وفقا للمادة السادسة من هذا العقد.",
    "4. يلتزم العميل باستخدام الخدمة بشكل شخصي ولأغراض مشروعة وقانونية.",
    "5. يلتزم العميل بالاطلاع والموافقة على جميع الشروط والأحكام وسياسة الخصوصية الخاصة بالخدمة وتحديثاتها.",

    "", // سطر فارغ

    // المادة الحادية عشرة مسؤوليات الشركة
    "المادة الحادية عشرة: مسؤوليات الشركة",
    "1. تلتزم الشركة بتوفير خدمة آمنة وفعالة للعميل عبر تطبيق \"شلة\".",
    "2. تلتزم الشركة بحماية بيانات العميل ومعلوماته الشخصية وفقا لأحكام نظام حماية البيانات الشخصية المعمول به في المملكة العربية السعودية وسياسة الخصوصية المعلنة للشركة.",
    "3. تلتزم الشركة بضمان عدم فرض أي رسوم إدارية أو رسوم تأخير أو فوائد أو رسوم إعادة تفعيل أو أي رسوم إضافية أخرى على العميل مقابل استخدام خدمة \"قيدها\"، بخلاف قيمة المشتريات الأصلية.",
    "4. تلتزم الشركة بتوفير كشوف حساب دورية للعميل عبر التطبيق توضح العمليات المنفذة والرصيد المستحق وتواريخ الاستحقاق.",

    "", // سطر فارغ

    "المادة الثانية عشرة شروط عامة",
    "1. تعديل الشروط والأحكام يحق للشركة تعديل شروط وأحكام هذا العقد وسياسات الخدمة في أي وقت سيتم إشعار العميل بأي تعديلات جوهرية قبل ثلاثين (30) يومًا على الأقل من تاريخ سريانها، وذلك عبر إشعار داخل التطبيق أو عبر البريد الإلكتروني المسجل أو أي وسيلة أخرى تحددها الشركة. يعتبر استمرار العميل في استخدام الخدمة بعد تاریخ سريان التعديلات موافقة منه على الالتزام بالشروط والأحكام المعدلة. يقع على عاتق العميل مسؤولية مراجعة الشروط والأحكام بشكل دوري.",
    "2. سياسة الخصوصية يقر العميل باطلاعه و موافقته على سياسة الخصوصية الخاصة بشركة \"شلة\" والمتاحة على الموقع الإلكتروني والتطبيق، والتي تعتبر جزءا لا يتجزأ من هذا العقد.",
    "3. القانون الواجب التطبيق يخضع هذا العقد ويفسر وفقا للأنظمة والقوانين المعمول بها في المملكة العربية السعودية.",
    "4. تسوية النزاعات في حال نشوء أي نزاع أو خلاف بين الطرفين بخصوص هذا العقد أو الخدمة المقدمة بموجبه، يلتزم الطرفان بالسعي لحله وديا عن طريق المفاوضات المباشرة أو عبر الوساطة خلال مدة ثلاثون (30) يومًا أقصاها من تاريخ إخطار أحد الطرفين للآخر بوجود النزاع في حال تعذر الوصول إلى تسوية ودية خلال المدة المذكورة، تختص المحاكم السعودية في مدينة الرياض بالنظر في النزاع.",
    "5. اللغة اللغة العربية هي اللغة المعتمدة في تفسير هذا العقد وتطبيقه.",
    "6. العناوين تعتبر عناوين المواد والفقرات في هذا العقد إرشادية فقط ولا تستخدم في تفسير بنوده.",
    "7. الإشعارات تعتبر الإشعارات المرسلة عبر تطبيق \"شلة\" أو الرسائل النصية SMS أو البريد الإلكتروني أو تطبيق واتساب على العناوين والأرقام المسجلة من قبل العميل بمثابة إشعارات رسمية ومنتجة لآثارها القانونية.",
    "",
    "إقرار وتوقيع",
    "يقر الطرفان بأهليتهما الكاملة للتعاقد وبأنهما قد قرآ وفهما جميع بنود هذا العقد وملاحقه بما في ذلك سياسة الخصوصية والشروط والأحكام المنشورة في التطبيق ويوافقان على الالتزام بها.",
    "",
    "",
    "",
    "",
    "الطرف الأول: الشركة",
    "الاسم: شله",
    "التوقيع: ____________________",
    "",
    "",
    "",
    "الطرف الثاني: العميل",
    "الاسم: $name",
    "التوقيع: ____________________",

    "",
    "",
  ];
}
